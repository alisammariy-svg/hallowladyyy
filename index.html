<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>???</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
}

body{
  font-family:'Courier New', monospace;
  background:#000;
  min-height:100vh;
  overflow:hidden;
  position:relative;
}

/* ===== GRAIN ===== */
body::before{
  content:'';
  position:fixed;
  inset:-50%;
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="1.9" numOctaves="5"/></filter><rect width="300" height="300" filter="url(%23n)"/></svg>');
  opacity:.25;
  pointer-events:none;
  z-index:9999;
  animation:grain .2s steps(4) infinite;
}
@keyframes grain{
  0%{transform:translate(0,0)}
  25%{transform:translate(-2%,-1%)}
  50%{transform:translate(1%,-2%)}
  75%{transform:translate(-1%,1%)}
}

/* ===== VIGNETTE ===== */
body::after{
  content:'';
  position:fixed;
  inset:0;
  box-shadow:inset 0 0 300px 120px rgba(0,0,0,.95);
  pointer-events:none;
  z-index:9998;
}

.container{
  width:100%;
  height:100vh;
  position:relative;
  display:flex;
  justify-content:center;
  align-items:center;
}

/* ===== START BUTTON ===== */
#startBtn{
  padding:18px 40px;
  background:#140f0c;
  color:#9a9a9a;
  border:1px solid #555;
  letter-spacing:4px;
  text-transform:uppercase;
  cursor:pointer;
  z-index:10;
}

/* ===== SCENE ===== */
.scene{
  display:none;
  width:100%;
  height:100%;
  justify-content:center;
  align-items:center;
  gap:100px;
}
.scene.active{display:flex}

/* ===== BOOK ===== */
.book-container{perspective:1200px}

.book{
  position:relative;
  width:450px;
  height:550px;
  transform-style:preserve-3d;
}

.book-cover{
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,#231912,#140f0a);
  transform-origin:left;
  transition:transform 1.2s ease;
}

.book.closed .book-cover{transform:rotateY(0deg)}
.book.open .book-cover{transform:rotateY(-165deg)}

.book-pages{
  position:absolute;
  inset:0;
  background:linear-gradient(135deg,#f5f0e6,#d7cdbc);
  padding:50px;
  transition:opacity .6s;
}

.book.closed .book-pages{
  opacity:0;
  pointer-events:none;
}
.book.open .book-pages{
  opacity:1;
}

.note-text{
  font-family:Georgia, serif;
  font-size:18px;
  line-height:2;
  color:#2a2520;
  white-space:pre-line;
}

/* ===== LAMP ===== */
.lamp-bulb{
  width:50px;
  height:50px;
  border-radius:50%;
  background:#222;
}
.lamp-bulb.on{
  background:#ffe680;
  box-shadow:0 0 80px rgba(255,230,120,.9);
}

/* ================================================= */
/* ================= MOBILE FIX =================== */
/* ================================================= */
@media (max-width: 768px){

  body{
    overflow:auto;
  }

  .scene.active{
    flex-direction:column;
    gap:30px;
    padding:20px 0;
  }

  .book{
    width:90vw;
    height:auto;
  }

  .book-pages{
    padding:25px;
  }

  .note-text{
    font-size:15px;
    line-height:1.7;
  }

}
</style>
</head>

<body>

<div class="container">
  <button id="startBtn">Rätsel starten</button>

  <div class="scene" id="scene">
    <div class="book-container">
      <div class="book closed" id="book">
        <div class="book-cover"></div>
        <div class="book-pages">
          <div class="note-text">
Dort, wo Bücher keinen Besitzer haben.
Wo man nimmt, um zu geben.
Vierundzwanzig Stunden.
Ein Quadratmeter.

Du brauchst einen Namen.

Das verdammte Licht…
es spinnt wieder.
          </div>
        </div>
      </div>
    </div>

    <div class="lamp-bulb" id="bulb"></div>
  </div>
</div>

<script>
let finished=false;

const morse={
  N:'-.',E:'.',I:'..',L:'.-..',
  A:'.-',B:'-...',U:'..-',T:'-'
};

const message="NEIL LABUTE";

function wait(ms){return new Promise(r=>setTimeout(r,ms));}

async function playMorse(){
  const bulb=document.getElementById('bulb');
  for(const c of message){
    if(c===' '){await wait(1400);continue;}
    for(const s of morse[c]){
      bulb.classList.add('on');
      await wait(s==='.'?200:600);
      bulb.classList.remove('on');
      await wait(200);
    }
    await wait(600);
  }
}

document.getElementById('startBtn').onclick=async function(){
  if(finished)return;

  this.style.display='none';
  const scene=document.getElementById('scene');
  const book=document.getElementById('book');

  scene.classList.add('active');

  setTimeout(()=>book.classList.replace('closed','open'),600);

  await wait(2000);
  await playMorse();

  setTimeout(()=>{
    finished=true;
    book.classList.replace('open','closed');
  },800);
};
</script>

</body>
</html>
